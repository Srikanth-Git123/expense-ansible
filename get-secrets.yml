- name: Get Secrets
  hosts: localhosts
  vars:
    ssh: "{{lookup('hashi_vault', 'secret=common/data/common token={{vault_token}} url=https://vault.psrikanth.online:8200 validate_certs=False')}}"
  tasks:
    - name: Create credentials file
      ansible.builtin.lineinfile:
        path : secrets
        line: "ansible_user: {{ ssh.user }}\nansible_password: {{ ssh.pass }}"
        create: yes

